<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive">		<title>Untitled Page</title>	</head>	<body bgcolor="#ffffff">		<p> <font size="6"><b>The History of the Unified Model<br>				</b></font></p>		<p>These notes are based on the UM user guide (<a href="http://ncas-cms.nerc.ac.uk/content/view/60/86/" target="http://ncas-cms.nerc.ac.uk/content/view/60/86/">http://ncas-cms.nerc.ac.uk/content/view/60/86/</a>)</p>		<hr>		<p><b><font size="5">Contents</font></b></p>		<p><a href="#Background">Background to the Unified Model</a><br>			<a href="#version updates">						Version upgrades and hardware platforms</a><br>			<a href="#2.0-2.6">			Early versions 2.0-2.6</a><br>			<a href="#2.7">Version 2.7</a><br>			<a href="#2.8">Version 2.8</a><br>			<a href="#3.4">Version 3.0<br>				Version 3.1<br>				Version 3.2<br>				Version 3.3<br>				Version 3.4</a><br>			<a href="#3.5/4.0">			Version 3.5/4.0<br>			</a><a href="#4.1">Version 4.1</a><br>			<a href="#4.2/4.3">			Version 4.2/4.3<br>					Version 4.4</a><br>			<a href="#4.5">			Version 4.5</a><br>			<a href="#5.0-5.3">			Versions 5.0, 5.1 and 5.2</a><br>			<a href="#5.4">			Version 5.3<br>					Version 5.4</a><br>			<a href="#5.5">			Version 5.5</a></p>		<hr>		<p><a id="Background" name="Background"></a><b>Background to the Unified Model <br>			</b><br>						By the end of the 1980's the Met Office had developed separate numerical prediction models to sustain climate research and operational forecast capabilities. The climate model consisted of 11 vertical layers with a global domain at 250km horizontal resolution and incorporated a relatively sophisticated representation of physical processes. The operational model had 15 vertical layers and ran in two versions: a `coarse mesh' global model at 150km resolution and a `fine mesh' limited area model covering Europe and the N.Atlantic at 75km resolution. These models had simpler calculations of physical processes and employed a different dynamical integration scheme to that of the climate model. In addition a mesoscale model with 15km resolution provided some operational products for the UK area, and comprised a completely distinct formulation for both physics and dynamics. There were also new requirements arising from the need to include more complex interactions into long climate integrations, in particular the introduction of an ocean model, to be coupled explicitly with the atmosphere model. <br>			<br>			 Each model had its own control, file and output structure, as well as separate scientific formulations, with separate teams responsible for development. The models ran on a CDC CYBER 205 which was due to be replaced by an ETA systems platform during 1989. Significant effort was expended in adapting the code of each model to run on the new platform, but this work was suspended when the manufacturing company was wound up and a new vendor had to be found. It was decided to promote a longer term project to achieve a unification of model systems to fill the gap, and reduce the duplication of effort required to implement separate models on new hardware. The lifetime of the CYBER was extended and development of the CYBER models frozen; a Cray Systems YMP with 8 vector processors was procured with a Unix based operating system and the machine arrived in January 1990. A formal Unified Model project was started in July 1989 and continued until October 1991 when it was judged that the main components were ready and the Unified Model was born. <br>			<br>			 A number of key strategic decisions has shaped the structure and development of the UM: <br>			<br>				&#x2022; 	 The system would share a common control and file structure for all types of models, so that individual models running in separate environments would be  replaced by different model configurations of the UM.<br>			<br>				&#x2022; 	 Model set-up would be achieved via a graphical user interface, divorcing the  detail of control file information from decisions made by the user. Thus presentation of model options to the user is simplified, the process of model submission is streamlined and the occurrence of inconsistencies or errors during  set-up is reduced.<br>			<br>				&#x2022; 	 The UM system would be upgraded periodically through change control management  techniques, which is an essential safeguard for code changes made by developers  that may affect other model configurations. Each upgrade constitutes a UM  version.<br>			<br>				&#x2022; 	 Model software would be coded in Fortran, with a minimum of machine specific or  low-level language additions. This is required to loosen the dependency on a  particular hardware platform, and allow more rapid development of new  scientific routines by researchers. This decision was later extended to include the objective of providing explicit portability. Hence model  configurations which were developed on supercomputer platforms should be  readily ported to other systems such as workstations, with a minimum of  changes.<br>			<br>				&#x2022; 	 Models would depend on a common output diagnostics system, which was capable of  intercepting transient fields, or calculations based on such fields, as well as  primary fields available through periodic model dumps.<br>			<br>				&#x2022; 	 Separate choices of scientific schemes would be readily available from the user  interface, and different physics schemes would be `plug compatible', ie it  should be easy to import or export schemes to other organisations' models with  a minimum of effort.</p>		<H2><a id="version updates" name="version updates"></a><A NAME="SECTION00522000000000000000">Version upgrades and hardware platforms</A></H2>		<P>Table <A HREF="#table 1.2">1.2</A> lists release dates for each UM version and thedate at which the operational forecast model was upgraded to the new release.Some indication of the more major changes to the hardware platform is given.		<DIV ALIGN="CENTER"><A NAME="table 1.2"></A><TABLE><CAPTION><STRONG>Table 1.2:</STRONG>Unified Model Versions</CAPTION><TR><TD>    <DIV ALIGN="CENTER"><TABLE CELLPADDING=3 BORDER="1" ALIGN="CENTER"><TR><TH ALIGN="CENTER"><B>UM Version</B></TH><TH ALIGN="CENTER"><B>Release</B></TH><TH ALIGN="CENTER"><B>Operational</B></TH><TH ALIGN="CENTER"><B>Hardware Platform:</B></TH><TH ALIGN="CENTER"><B>Compiler</B></TH></TR><TR><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER"><B>Date</B></TD><TD ALIGN="CENTER"><B>Release</B></TD><TD ALIGN="CENTER"><B>Operating System</B></TD><TD ALIGN="CENTER"><B>Release</B></TD></TR><TR><TD ALIGN="CENTER">2.0</TD><TD ALIGN="CENTER">16.05.91</TD><TD ALIGN="CENTER">05.06.91</TD><TD ALIGN="CENTER">Cray YMP-8: Unicos5.1</TD><TD ALIGN="CENTER">4.0.2</TD></TR><TR><TD ALIGN="CENTER">2.1</TD><TD ALIGN="CENTER">27.06.91</TD><TD ALIGN="CENTER">16.07.91</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">2.2</TD><TD ALIGN="CENTER">15.08.91</TD><TD ALIGN="CENTER">17.09.91</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">2.3</TD><TD ALIGN="CENTER">23.10.91</TD><TD ALIGN="CENTER">12.11.91</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">2.4</TD><TD ALIGN="CENTER">07.01.92</TD><TD ALIGN="CENTER">11.02.92</TD><TD ALIGN="CENTER">Unicos6.0</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">2.5</TD><TD ALIGN="CENTER">26.03.92</TD><TD ALIGN="CENTER">12.05.92</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">2.6</TD><TD ALIGN="CENTER">04.06.92</TD><TD ALIGN="CENTER">11.08.92</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">5.0.2</TD></TR><TR><TD ALIGN="CENTER">2.7</TD><TD ALIGN="CENTER">01.09.92</TD><TD ALIGN="CENTER">27.10.92</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">5.0.3</TD></TR><TR><TD ALIGN="CENTER">2.8</TD><TD ALIGN="CENTER">22.12.92</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">3.0</TD><TD ALIGN="CENTER">15.01.93</TD><TD ALIGN="CENTER">23.02.93</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">3.1</TD><TD ALIGN="CENTER">30.03.93</TD><TD ALIGN="CENTER">25.05.93</TD><TD ALIGN="CENTER">Unicos7.0</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">3.2</TD><TD ALIGN="CENTER">06.09.93</TD><TD ALIGN="CENTER">19.10.93</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">3.3</TD><TD ALIGN="CENTER">03.06.94</TD><TD ALIGN="CENTER">12.07.94</TD><TD ALIGN="CENTER">Cray C90:</TD><TD ALIGN="CENTER">6.0.3.2</TD></TR><TR><TD ALIGN="CENTER">3.4</TD><TD ALIGN="CENTER">24.01.95</TD><TD ALIGN="CENTER">07.03.95</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">3.5</TD><TD ALIGN="CENTER">03.08.95</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">4.0</TD><TD ALIGN="CENTER">12.01.96</TD><TD ALIGN="CENTER">19.03.96</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">4.1</TD><TD ALIGN="CENTER">20.08.96</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">Unicos8.0</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">4.2</TD><TD ALIGN="CENTER">15.01.97</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">Cray T3E: mk1.4.1</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">4.3</TD><TD ALIGN="CENTER">09.06.97</TD><TD ALIGN="CENTER">29.01.98</TD><TD ALIGN="CENTER">mk1.6.1</TD><TD ALIGN="CENTER">2.0.3.4</TD></TR><TR><TD ALIGN="CENTER">4.4</TD><TD ALIGN="CENTER">22.12.97</TD><TD ALIGN="CENTER">15.04.98</TD><TD ALIGN="CENTER">mk2.0.0</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">4.5</TD><TD ALIGN="CENTER">11.12.98</TD><TD ALIGN="CENTER">23.06.99</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">3.0.2.1</TD></TR><TR><TD ALIGN="CENTER">5.0</TD><TD ALIGN="CENTER">30.11.99</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">mk2.0.4</TD><TD ALIGN="CENTER">3.0.2.1</TD></TR><TR><TD ALIGN="CENTER">5.1</TD><TD ALIGN="CENTER">02.08.00</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">mk2.0.5</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">5.2</TD><TD ALIGN="CENTER">20.04.01</TD><TD ALIGN="CENTER">07.08.02</TD><TD ALIGN="CENTER">mk2.0.5.40</TD><TD ALIGN="CENTER">3.0.4.2+</TD></TR><TR><TD ALIGN="CENTER">5.3</TD><TD ALIGN="CENTER">12.04.02</TD><TD ALIGN="CENTER">07.08.02</TD><TD ALIGN="CENTER">mk2.0.5.52</TD><TD ALIGN="CENTER">3.0.4.2++</TD></TR><TR><TD ALIGN="CENTER">5.4</TD><TD ALIGN="CENTER">06/12/02</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">mk2.0.5.59</TD><TD ALIGN="CENTER">&nbsp;</TD></TR><TR><TD ALIGN="CENTER">5.5</TD><TD ALIGN="CENTER">09/06/03</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">&nbsp;</TD><TD ALIGN="CENTER">&nbsp;</TD></TR></TABLE>            <A NAME="tab:UM_versions"></A>    </DIV></TD></TR></TABLE></DIV>		<P>The following sections illustrate the more significant changes that have contributed to version upgrades. Brief descriptions of system enhancements are given, with some indication of new scientific features, concentrating on the atmosphere model. In reality each UM version consists of a hundred or more individual changes, ranging from minor corrections to major improvements of infra-structure facilities, plus work required to take advantage of successive enhancements to the available computing resources.</P>		<p><a id="2.0-2.6" name="2.0-2.6"></a><b>Early versions 2.0-2.6 <br>			</b>						Rapid development continued to consolidate the performance of the UM. A significant number of error corrections arose from the relative immaturity of the code. Changes included: <br>			<br>				&#x2022; 	 Introduction of C I/O routines to replace Cray specific unblocked data files and replacement of reference to file names by assign statements to being passed  by environment variables.<br>			<br>				&#x2022; 	 Source code modification of code by users for compilation was changed from  ``quick'' to ``normal'' modes of Cray proprietary update package, to ensure that a change to a COMDECK was  propagated to all affected routines (see section 3.1).<br>			<br>				&#x2022; 	 Vertical interpolation of boundary files was enabled, allowing generation of boundary conditions for a model on a different vertical grid.<br>			<br>				&#x2022; 	 A facility to enable timeseries to be output from the diagnostic system was introduced.<br>			<br>				&#x2022; 	 The conversion of potential temperature to temperature ( )  was modified to account for the dynamical formulation of the hydrostatic relation; definitions of standard vertical hybrid co-ordinates changed.<br>			<br>				&#x2022; 	 Dynamics calculations at the top model level could now be switched to run with  a halved timestep, preventing model instabilities causing model failures  without the cost of running the entire model with a reduced timestep.</p>		<p><a id="2.7" name="2.7"></a><b>Version 2.7 <br>			</b>						Changes already available through the UM system were co-ordinated to produce a UM mesoscale configuration with 30 vertical levels. This replaced the earlier mesoscale model and went operational in December 1992. <br>			<br>				&#x2022; 	 Several enhancements of physics were consolidated in the system, including the components contributing to the first climate version (1CV, now labelled HADAM1):<br>				1.  	 Convection with an explicit downdraught;<br>				2.  	 Rapidly mixed boundary layer code.<br>			<br>				&#x2022; 	 Introduction of a separate version of the longwave radiation scheme based on transmissivity values derived at ECMWF.</p>		<p><a id="2.8" name="2.8"></a><b>Version 2.8 <br>			</b>							&#x2022; 	Upgrade of source code management tool from Cray update to Cray nupdate.<br>			<br>				&#x2022; 	 A new packing code was introduced into look-up headers of data fields to cater  for new combinations of packing and data compression. This required an explicit  utility to convert model dumps at 2.7 and earlier to the new format at 2.8.<br>			<br>				&#x2022; 	 (Outstanding 1CV science change): grouping of model levels into 3 explicit cloud layers within the shortwave radiation scheme.<br>			<br>				&#x2022; 	 Time-smoothing during the adjustment timestep within the dynamics was introduced to alleviate the problem of noisy fields at upper levels in the operational global model.<br>			<br>			<br>			<a id="3.0" name="3.0"></a><b>			Version 3.0 <br>			</b>						The active code of Version 3.0 was identical in content to that at 2.8, but line numbers of code were re-sequenced and some old comments were removed. DECK names were changed systematically to reflect the concept of multiple version-releases of a code section (see section 4.7). </p>		<p></p>		<p><a id="3.1" name="3.1"></a><b>Version 3.1 </b><br>			&#x2022; 	A new option was provided to allow more than one boundary file to be produced  by the model, so that multiple limited area models could be driven from the same  generating run.<br>			<br>				&#x2022; 	 Functionality of the reconfiguration program was extended to include initialisation of model analyses with ECMWF perturbations, simplifying running  of this category of ensemble forecasts. An option to transplant fields from a different model dump into a given domain within the model analysis was also  developed.<br>			<br>			<br>			<a id="3.2" name="3.2"></a><b>			Version 3.2 <br>			</b>						The first version of the portable model was made to work at 3.2 on HP workstations, but with a large number of local modifications, and relied on fixed experiment libraries generated by the user interface on the IBM mainframe computer. <br>			<br>				&#x2022; 	 Dynamic allocation of primary fields was introduced and required large scale changes to the top level control structure of the model. Sizes of arrays depending on the model configuration were now passed at run-time, removing the  necessity to re-compile when changes in diagnostic output were required.<br>			<br>				&#x2022; 	 The value of the real missing data indicator was changed from -32768.0 to  -2**30 to reduce the possibility of valid data being assigned as missing.<br>			<br>			<br>			<a id="3.3" name="3.3"></a><b>			Version 3.3 </b><br>			&#x2022; 	A facility for users to introduce their own prognostic variables without requiring a change to the user interface was implemented, giving code developers freedom to make and test a greater range of modifications locally.<br>			<br>				&#x2022; 	 GRIB format for output fields was provided as an option. The file structure was  of hybrid form, with lookup headers retained, but data packed as GRIB.<br>			<br>				&#x2022; 	 A halving of the dynamics timestep could be initiated on an automatic basis, depending on thresholds of wind speed or divergence in the top level being exceeded.<br>			<br>				&#x2022; 	 Calling convection routines less frequently than every timestep was enabled, providing a method of reducing cpu costs of the operational mesoscale model without significant degradation in performance.<br>			<br>				&#x2022; 	 The provision of source terms for aerosols, as part of a tracer advection technique for dealing with passive variables, provided essential functionality for both climate studies and later mesoscale visibility calculations.</p>		<p><a id="3.4" name="3.4"></a><b>Version 3.4 <br>			</b>							&#x2022; 	Unix scripts in the UM system were brought within code management by nupdate as  part of change control for new versions. This replaced having single frozen  copies and simplified the action of modifying scripts by different people.<br>			<br>				&#x2022; 	 Macrotasking techniques were introduced into dynamics, convection and radiation  schemes to facilitate more efficient use of the multi-tasked C90 environment.<br>			<br>				&#x2022; 	 New options for atmosphere science routines, constituting the main components  of the second climate version (2CV, now labelled HADAM2a):<br>				1.  	 A more complex treatment of orographic roughness within the boundary layer code,  including the representation of silhouette orographic roughness;<br>				2.  	 A new gravity wave drag scheme incorporating anisotropic directional orographic  variances and `hydraulic jump' terms;<br>				3.  	 A new version of the convection routine with excess parcel buoyancy generated  from the surface level fluctuations of temperature and humidity;<br>				4.  	 A new large scale precipitation scheme with all snow falling out in a layer in  the same manner as for rain;<br>				5.  	 Inclusion of primitive cloud microphysics within the shortwave radiation  scheme, allowing a variation in cloud effective radius;<br>				6.  	 An option to re-set negative humidity values locally rather than globally.<br>			<br>				&#x2022; 	 A new multi-layer soil hydrology scheme.<br>			<br>				&#x2022; 	 Inclusion of trace gases in a new version of the longwave radiation.<br>			<br>				&#x2022; 	 Assimilation of humidity from MOPS (Moisture Observation Pre-processing System) was introduced, providing a method of feeding moisture information back into the hydrology cycle of the operational mesoscale model.<br>			<br>				&#x2022; 	 A dynamical sea-ice model was included in the Slab model (see section 4.12).<br>			<br>				&#x2022; 	 An ice section was added to the ocean model and assimilation within the ocean  model enabled.<br>			<br>				&#x2022; 	 This version was released to a number of external users, now with the capability of running on a Dec Alpha workstation.</p>		<p><a id="3.5/4.0" name="3.5/4.0"></a><b>Version 3.5/4.0 <br>			</b>						3.5 was an interim version required to stage the large changes planned for 4.0, and only had significance for the core development and testing team. This version spanned the transfer of central UM system facilities, including the user interface, from the IBM mainframe to a more portable Unix environment. At the Met Office this consists of a combination of HP workstation local area networks with the Cray C90. Modifications to code for 3.5 relative to the previous version were located on the mainframe. The repository for modifications to code against 3.5 and later versions is the Cray C90. Development of a new graphical user interface, the UMUI, was partially completed at 3.5, and fully implemented for 4.0. Submission of model jobs to the Cray C90, and inspection of subsequent output listings, was made independent of the IBM mainframe. <br>			<br>				&#x2022; 	 An X-windows user interface (UMUI) based on public domain TCL/TK building tools  was produced, a completely new program and structure from the mainframe  interface designed at the beginning of the UM. The UMUI now resides on HP  workstation networks, and is capable of being ported to other machines, such as the Cray C90 itself. This provided a more flexible platform for initiating  experiment set-up within the Met Office and created the capability to package  up the entire UM system for implementation by external users.<br>			<br>				&#x2022; 	 The first stage of work to facilitate the introduction and coupling of new sub-models into the system was completed. This included the transfer of primary addressing calculations, which had been performed pre-3.5 by the user  interface on the mainframe, into the model initialisation. In addition a new paradigm of sub-models and internal models was introduced for dealing with  different combinations of sub-model types.<br>			<br>				&#x2022; 	 Provision of the capability of running with a long physics timestep enabled significant reductions in cpu costs to be achieved by reducing the number of  physics calculations while maintaining model numerical stability.<br>			<br>				&#x2022; 	 Adoption of the UMUI running on HP workstations led to a loss of bit reproducibility for models set up at 3.4 and 4.0 due to the change in precision  of floating point calculations now performed on the 64 bit Cray machine rather  than the 32 bit IBM; and also due to the difference in number representation from IBM to HP. Other minor changes were made that  also affected bit reproducibility:<br>				1.  	 Correction in the value of ;<br>				2.  	 Corrections to filtering within the dynamics.<br>			<br>				&#x2022; 	 Addition of science routines to constitute third climate physics (3CV, now labelled HADAM2b):<br>				1.  	 Precipitation changes: Improved mixed phase and evaporation calculations;  explicit flux divergence and flux equilibrium schemes for ice fallout dependent  on timestep;<br>				2.  	 Re-appraisal of saturated specific humidity formulation.<br>			<br>				&#x2022; 	 A new radiation scheme (Slingo-Edwards) was introduced, covering both longwave  and shortwave regions, providing a greater flexibility of choice of radiative  spectral intervals.<br>			<br>				&#x2022; 	 A new hydrology routine incorporating the Penman-Monteith scheme was added,  with consistent changes made to a new version of the boundary layer routine.<br>			<br>				&#x2022; 	 Optional removal of horizontal diffusion for sloping model levels was included.<br>			<br>				&#x2022; 	 Latent heat nudging in the assimilation was provided for investigations with the operational mesoscale model.<br>			<br>				&#x2022; 	 Copyright notices were added to each item of source code.</p>		<p><a id="4.1" name="4.1"></a><b>Version 4.1 </b><br>						 Version 4.1 rationalised a number of changes introduced earlier, including some structural changes associated with the forthcoming move to a distributed memory (MPP) platform and was the last version to be released on the Cray C90.  HADCM3, the emergent climate model for the next set of major production runs was mostly developed with modifications against version 4.0, being upgraded to 4.1 in early 1997. The operational forecast model continued at 4.0 during the lifetime of the Cray C90. <br>			<br>			The repository for nupdate modifications to source code was changed, providing an RCS capability for lodging successive corrections. This preserves a history of local changes during the period testing a new version, after the initial build but before the final release. <br>			<br>				&#x2022; 	 Extensive addition of routines and code for running on a distributed memory platform. Existing source code was protected by placing most new code within a *DEF MPP compile time switch. Changes included the rationalisation of DO loop variable limits passed down to lower level physics and dynamics routines.<br>			<br>				&#x2022; 	 The WAVE model was introduced into the UM system, with WAVE source code converted to nupdate form. Control level changes allowed a WAVE dump to be read and interfaced into lower level routines. This required changes to STASH to deal with an extra dimension for the prognostic variables, since WAVE model variables are a function of (x,y,frequency,direction).<br>			<br>				&#x2022; 	 Further development of the submodel paradigm, partly associated with changes for the WAVE model. ppxref file functions were replaced by a newly formatted set of STASHmaster files, with a separate file for each internal model providing a description of each prognostic and diagnostic variable known by STASH for that model.<br>			<br>				&#x2022; 	 Addition of science routines as a preliminary to, but not defining fully, HADCM3: MOSES (Met Office Surface Exchange Scheme) incorporating:<br>				1.  	 a Penman-Monteith boundary layer and hydrology scheme;<br>				2.  	 an improved multi-layer soil moisture and temperature model;<br>				3.  	 an interactive vegetation canopy.<br>				&#x2022; 	 Introduce code for calculations of the sulphur cycle, with:<br>				1.  	 A new chemistry section;<br>				2.  	 Wet scavenging;<br>				3.  	 Boundary layer and convective transport;<br>				4.  	 Tracer advection of aerosol.</p>		<p><a id="4.2/4.3" name="4.2/4.3"></a><b>Version 4.2/4.3 </b><br>						 Version 4.2 was a development version, the first to be released on the Cray T3E, giving an MPP capability, with no science changes. Version 4.3 consolidated corrections for both MPP and HADCM3 science, providing full functionality for operational and HADCM3 climate models. <br>			<br>				&#x2022; 	Most changes were to provide an MPP capability:<br>				1.  	 Introduction of message passing libraries, realised through a generalised software interface (GC/GCOM);<br>				2.  	 Domain decomposition of model grids: 2-dimensional sub-areas for the atmosphere model; 1-dimensional (rows) for the ocean model;<br>				3.  	 Model dump read/write and STASH output routines re-arranged to cater for gathering and scattering data for distributed processors.<br>				&#x2022; 	 Single processor optimisation of code tailored for a cache based rather than vector based architecture.<br>				&#x2022; 	 The change in number representation from C90 to T3E (Cray specific to IEEE) gave greater precision but a smaller range; conversion utilities were provided for using Cray C90 files.<br>				&#x2022; 	 A new compilation system was introduced, based on Unix `make' operating on nupdate decks, providing consistency between pre-built and locally generated compiled code, with flexibility for quick compilations.</p>		<p><a id="4.4" name="4.4"></a><b>Version 4.4 <br>			</b>			 The second UM version (after 4.0) to be released as a complete portable package, tested on a variety of platforms. <br>			<br>				&#x2022; 	OASIS coupler code, allowing external models to be coupled with UM models with a minimum of changes to the external model.<br>				&#x2022; 	 Well-formed i/o, with data files re-structured to start at sector boundaries, improving i/o performance to disk.<br>				&#x2022; 	 New science sections (precipitation, convection, vertical diffusion, dynamics adjustment and filtering), optimised for T3E processors but not bit reproducible with equivalent sections.<br>				&#x2022; 	 Introduction of mixed phase cloud and precipitation scheme.<br>				&#x2022; 	 New options for science routines, constituting the main components of the planned new climate experiment, HADCM4:<br>				1.  	 MOSES II: enhancement of MOSES, with surface hydrology and boundary layer scheme modifications;<br>				2.  	 Radiationally active anvils in convection;<br>				3.  	 A new ice scheme in radiation.<br>				&#x2022; 	 Introduction of a scheme for interactive vegetation.<br>				&#x2022; 	 Climate meaning for a Gregorian calendar (enabled only for a 360 day calendar previously).<br>				&#x2022; 	 Faster energy correction: accumulate fluxes over a period rather than summing every timestep.<br>				&#x2022; 	 New utilities for generating boundary condition files: bcreconf (reconfigure from another resolution) and makebc (generate from dumps).</p>		<p><a id="4.5" name="4.5"></a><b>Version 4.5 <br>			</b>			 Mostly a science update. <br>			<br>				&#x2022; 	Introduction of the Single Column Model as a UM configuration.<br>			<br>				&#x2022; 	 Addition of NH3 and soot tracer species (and related modelling).<br>			<br>				&#x2022; 	 Many improvements to carbon cycle modelling, including introduction of CO2 coupling capability in Atmosphere/Ocean runs.<br>			<br>				&#x2022; 	 Many performance optimisations including convection load-balancing.<br>			<br>			<br>			<a id="5.0-5.3" name="5.0-5.3"></a><b>			Versions 5.0, 5.1 and 5.2 <br>			</b>			 The 5.x series of versions saw the introduction of the ``New Dynamics&quot;. This was the new Semi-Lagrangian dynamics based on a non-hydrostatic formulation. At the same time, the physical parameterisations were rationalised so that most schemes had only one version remaining. Versions 5.0 and 5.1 were intermediate versions with limited functionality that were only of interest to developers. Version 5.2 was the first of the 5.x versions to be used operationally. <br>			<br>			 The 5.x series introduced a number of major technical changes as well as the new dynamical core, <br>			<br>				&#x2022; 	 The reconfiguration was rewritten in Fortran 90 (using data-types, dynamical memory allocation etc).<br>			<br>				&#x2022; 	 Model addressing was changed to start from the Southern row rather than the Northern row.<br>			<br>				&#x2022; 	 Lateral boundary conditions were extended to use a larger range of variables and to include halos external to the domain as this was required by the dynamics.<br>			<br>				&#x2022; 	 The C pre-processor (cpp) was introduced as a means of conditional compilation, taking over this functionality from nupdate.</p>		<p><a id="5.3" name="5.3"></a><b>Version 5.3 <br>			</b>				&#x2022; 	nupdate was replaced by pumscm - a Perl program that was written in-house and implemented just those features of nupdate that were commonly used.<br>			<br>				&#x2022; 	 A coastal tiling scheme was introduced to give better representation of surface land-sea processes at the sub-gridbox scale.<br>			<br>				&#x2022; 	 A new parametrization scheme for calculation of local mixing coefficients within the boundary layer under stable conditions was introduced.<br>			<br>				&#x2022; 	 Addition of many STASH diagnostics required for operational running.<br>			<br>				&#x2022; 	 The Ultra-Simple Spectral gravity wave parameterisation was introduced (A06_4A)<br>			<br>				&#x2022; 	 There was a major restructuring of the Ocean model code to improve performance and tidy the code.<br>			<br>			<br>			<a id="5.4" name="5.4"></a><b>			Version 5.4 <br>			</b>			 This version was primarily a science update for the planned HadGEM1 climate model. <br>			<br>				&#x2022; 	 A new convection scheme (4A) was introduced.<br>			<br>				&#x2022; 	 A preliminary version of a new Prognostic Cloud and Prognostic Condensate scheme (PC2) was introduced.<br>			<br>				&#x2022; 	 A new option to use mixing ratios rather than humidities in the dynamics was included.<br>			<br>			<br>			<a id="5.5" name="5.5"></a><b>			Version 5.5 <br>			</b>			 Another release primarily for consolidation of new science. <br>			<br>				&#x2022; 	 The STOCHEM atmospheric chemistry model was introduced.<br>			<br>				&#x2022; 	 The Wave model (which had been largely dormant since its introduction into the UM) was updated with the WAM model.<br>			<br>				&#x2022; 	 A new river-routing scheme was included to improve the water cycle particularly for coupled ocean-atmosphere configurations.<br>			<br>				&#x2022; 	 The ability to reconfigure from ECMWF GRIB data (which had not been possible since the introduction of the New Dynamics) was re-enabled.<br>			<br>				&#x2022; 	 In order to accommodate new schemes, the STASHmaster option codes were extended to 30 digits.<br>			<br>				&#x2022; 	 Schemes for modelling the effects of mineral dust and biomass smoke atmospheric tracers were included.<br>			<br>				&#x2022; 	 A new FOAM assimilation scheme was introduced.<br>			<br>				&#x2022; 	 Multi-category sea-ice was introduced as an option.<br>			<br>				&#x2022; 	 The ability to use WGDOS packing for fieldsfiles and 32 bit packing for dumps on non-Cray platforms was introduced.</p>		<p></p>	</body></html>
